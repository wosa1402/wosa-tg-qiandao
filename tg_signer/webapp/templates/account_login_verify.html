{% extends "base.html" %}
{% set show_nav = true %}
{% set title = "验证码 - TG Signer Web" %}

{% block content %}
  <div class="panel" style="max-width: 560px;">
    <h2 style="margin-top: 0">验证码：<code>{{ account_name }}</code></h2>
    <p class="muted">请输入你收到的验证码。</p>
    {% if error %}
      <p class="error">{{ error }}</p>
    {% endif %}
    {% if notice %}
      <p class="ok">{{ notice }}</p>
    {% endif %}

    <form method="post" action="/accounts/{{ account_name }}/login/verify">
      <input type="hidden" name="csrf_token" value="{{ csrf_token }}" />
      <input type="hidden" name="login_id" value="{{ login_id }}" />
      <div class="field">
        <label>验证码</label>
        <input type="text" name="code" placeholder="12345" required />
      </div>
      <button class="btn primary" type="submit">验证并登录</button>
      <a class="btn" href="/accounts/{{ account_name }}/login">返回</a>
    </form>

    <form method="post" action="/accounts/{{ account_name }}/login/resend" style="margin-top: 10px;">
      <input type="hidden" name="csrf_token" value="{{ csrf_token }}" />
      <input type="hidden" name="login_id" value="{{ login_id }}" />
      <button class="btn" type="submit">重新发送验证码</button>
    </form>
  </div>
{% endblock %}
